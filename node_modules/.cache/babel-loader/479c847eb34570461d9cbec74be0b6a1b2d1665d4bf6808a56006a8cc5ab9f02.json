{"ast":null,"code":"/*! @azure/msal-common v14.7.0 2024-02-07 */\n'use strict';\n\nimport { ThrottlingUtils } from './ThrottlingUtils.mjs';\nimport { AuthError } from '../error/AuthError.mjs';\nimport { createClientAuthError } from '../error/ClientAuthError.mjs';\nimport { networkError } from '../error/ClientAuthErrorCodes.mjs';\n\n/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n/** @internal */\nclass NetworkManager {\n  constructor(networkClient, cacheManager) {\n    this.networkClient = networkClient;\n    this.cacheManager = cacheManager;\n  }\n  /**\n   * Wraps sendPostRequestAsync with necessary preflight and postflight logic\n   * @param thumbprint\n   * @param tokenEndpoint\n   * @param options\n   */\n  async sendPostRequest(thumbprint, tokenEndpoint, options) {\n    ThrottlingUtils.preProcess(this.cacheManager, thumbprint);\n    let response;\n    try {\n      response = await this.networkClient.sendPostRequestAsync(tokenEndpoint, options);\n    } catch (e) {\n      if (e instanceof AuthError) {\n        throw e;\n      } else {\n        throw createClientAuthError(networkError);\n      }\n    }\n    ThrottlingUtils.postProcess(this.cacheManager, thumbprint, response);\n    return response;\n  }\n}\nexport { NetworkManager };","map":{"version":3,"names":["NetworkManager","constructor","networkClient","cacheManager","sendPostRequest","thumbprint","tokenEndpoint","options","ThrottlingUtils","preProcess","response","sendPostRequestAsync","e","AuthError","createClientAuthError","networkError","postProcess"],"sources":["D:\\react-typescript\\intelli-gui\\node_modules\\@azure\\msal-common\\src\\network\\NetworkManager.ts"],"sourcesContent":["/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { INetworkModule, NetworkRequestOptions } from \"./INetworkModule\";\nimport { RequestThumbprint } from \"./RequestThumbprint\";\nimport { ThrottlingUtils } from \"./ThrottlingUtils\";\nimport { CacheManager } from \"../cache/CacheManager\";\nimport { AuthError } from \"../error/AuthError\";\nimport {\n    ClientAuthErrorCodes,\n    createClientAuthError,\n} from \"../error/ClientAuthError\";\nimport { ServerAuthorizationTokenResponse } from \"../response/ServerAuthorizationTokenResponse\";\n\nexport type NetworkResponse<T> = {\n    headers: Record<string, string>;\n    body: T;\n    status: number;\n};\n\nexport type UrlToHttpRequestOptions = {\n    protocol: string;\n    hostname: string;\n    hash: string;\n    search: string;\n    pathname: string;\n    path: string;\n    href: string;\n    port?: number;\n    auth?: string;\n};\n\n/** @internal */\nexport class NetworkManager {\n    private networkClient: INetworkModule;\n    private cacheManager: CacheManager;\n\n    constructor(networkClient: INetworkModule, cacheManager: CacheManager) {\n        this.networkClient = networkClient;\n        this.cacheManager = cacheManager;\n    }\n\n    /**\n     * Wraps sendPostRequestAsync with necessary preflight and postflight logic\n     * @param thumbprint\n     * @param tokenEndpoint\n     * @param options\n     */\n    async sendPostRequest<T extends ServerAuthorizationTokenResponse>(\n        thumbprint: RequestThumbprint,\n        tokenEndpoint: string,\n        options: NetworkRequestOptions\n    ): Promise<NetworkResponse<T>> {\n        ThrottlingUtils.preProcess(this.cacheManager, thumbprint);\n\n        let response;\n        try {\n            response = await this.networkClient.sendPostRequestAsync<T>(\n                tokenEndpoint,\n                options\n            );\n        } catch (e) {\n            if (e instanceof AuthError) {\n                throw e;\n            } else {\n                throw createClientAuthError(ClientAuthErrorCodes.networkError);\n            }\n        }\n\n        ThrottlingUtils.postProcess(this.cacheManager, thumbprint, response);\n\n        return response;\n    }\n}\n"],"mappings":";;;;;;;;AAAA;;;AAGG;AA+BH;MACaA,cAAc;EAIvBC,WAAYA,CAAAC,aAA6B,EAAEC,YAA0B;IACjE,IAAI,CAACD,aAAa,GAAGA,aAAa;IAClC,IAAI,CAACC,YAAY,GAAGA,YAAY;;EAGpC;;;;;AAKG;EACH,MAAMC,eAAeA,CACjBC,UAA6B,EAC7BC,aAAqB,EACrBC,OAA8B;IAE9BC,eAAe,CAACC,UAAU,CAAC,IAAI,CAACN,YAAY,EAAEE,UAAU,CAAC;IAEzD,IAAIK,QAAQ;IACZ,IAAI;MACAA,QAAQ,GAAG,MAAM,IAAI,CAACR,aAAa,CAACS,oBAAoB,CACpDL,aAAa,EACbC,OAAO,CACV;IACJ,EAAC,OAAOK,CAAC,EAAE;MACR,IAAIA,CAAC,YAAYC,SAAS,EAAE;QACxB,MAAMD,CAAC;MACV,OAAM;QACH,MAAME,qBAAqB,CAACC,YAAiC,CAAC;MACjE;IACJ;IAEDP,eAAe,CAACQ,WAAW,CAAC,IAAI,CAACb,YAAY,EAAEE,UAAU,EAAEK,QAAQ,CAAC;IAEpE,OAAOA,QAAQ;;AAEtB"},"metadata":{},"sourceType":"module","externalDependencies":[]}