{"ast":null,"code":"/*! @azure/msal-browser v3.9.0 2024-02-07 */\n'use strict';\n\nimport { Constants } from '@azure/msal-common';\nimport { createBrowserAuthError } from '../error/BrowserAuthError.mjs';\nimport { HTTP_REQUEST_TYPE } from '../utils/BrowserConstants.mjs';\nimport { getRequestFailed, noNetworkConnectivity, failedToParseResponse, postRequestFailed } from '../error/BrowserAuthErrorCodes.mjs';\n\n/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n/**\n * This class implements the Fetch API for GET and POST requests. See more here: https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API\n */\nclass FetchClient {\n  /**\n   * Fetch Client for REST endpoints - Get request\n   * @param url\n   * @param headers\n   * @param body\n   */\n  async sendGetRequestAsync(url, options) {\n    let response;\n    try {\n      response = await fetch(url, {\n        method: HTTP_REQUEST_TYPE.GET,\n        headers: this.getFetchHeaders(options)\n      });\n    } catch (e) {\n      if (window.navigator.onLine) {\n        throw createBrowserAuthError(getRequestFailed);\n      } else {\n        throw createBrowserAuthError(noNetworkConnectivity);\n      }\n    }\n    try {\n      return {\n        headers: this.getHeaderDict(response.headers),\n        body: await response.json(),\n        status: response.status\n      };\n    } catch (e) {\n      throw createBrowserAuthError(failedToParseResponse);\n    }\n  }\n  /**\n   * Fetch Client for REST endpoints - Post request\n   * @param url\n   * @param headers\n   * @param body\n   */\n  async sendPostRequestAsync(url, options) {\n    const reqBody = options && options.body || Constants.EMPTY_STRING;\n    let response;\n    try {\n      response = await fetch(url, {\n        method: HTTP_REQUEST_TYPE.POST,\n        headers: this.getFetchHeaders(options),\n        body: reqBody\n      });\n    } catch (e) {\n      if (window.navigator.onLine) {\n        throw createBrowserAuthError(postRequestFailed);\n      } else {\n        throw createBrowserAuthError(noNetworkConnectivity);\n      }\n    }\n    try {\n      return {\n        headers: this.getHeaderDict(response.headers),\n        body: await response.json(),\n        status: response.status\n      };\n    } catch (e) {\n      throw createBrowserAuthError(failedToParseResponse);\n    }\n  }\n  /**\n   * Get Fetch API Headers object from string map\n   * @param inputHeaders\n   */\n  getFetchHeaders(options) {\n    const headers = new Headers();\n    if (!(options && options.headers)) {\n      return headers;\n    }\n    const optionsHeaders = options.headers;\n    Object.keys(optionsHeaders).forEach(key => {\n      headers.append(key, optionsHeaders[key]);\n    });\n    return headers;\n  }\n  getHeaderDict(headers) {\n    const headerDict = {};\n    headers.forEach((value, key) => {\n      headerDict[key] = value;\n    });\n    return headerDict;\n  }\n}\nexport { FetchClient };","map":{"version":3,"names":["FetchClient","sendGetRequestAsync","url","options","response","fetch","method","HTTP_REQUEST_TYPE","GET","headers","getFetchHeaders","e","window","navigator","onLine","createBrowserAuthError","getRequestFailed","noNetworkConnectivity","getHeaderDict","body","json","status","failedToParseResponse","sendPostRequestAsync","reqBody","Constants","EMPTY_STRING","POST","postRequestFailed","Headers","optionsHeaders","Object","keys","forEach","key","append","headerDict","value"],"sources":["D:\\react-typescript\\intelli-gui\\node_modules\\@azure\\msal-browser\\src\\network\\FetchClient.ts"],"sourcesContent":["/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    Constants,\n    INetworkModule,\n    NetworkRequestOptions,\n    NetworkResponse,\n} from \"@azure/msal-common\";\nimport {\n    createBrowserAuthError,\n    BrowserAuthErrorCodes,\n} from \"../error/BrowserAuthError\";\nimport { HTTP_REQUEST_TYPE } from \"../utils/BrowserConstants\";\n\n/**\n * This class implements the Fetch API for GET and POST requests. See more here: https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API\n */\nexport class FetchClient implements INetworkModule {\n    /**\n     * Fetch Client for REST endpoints - Get request\n     * @param url\n     * @param headers\n     * @param body\n     */\n    async sendGetRequestAsync<T>(\n        url: string,\n        options?: NetworkRequestOptions\n    ): Promise<NetworkResponse<T>> {\n        let response;\n        try {\n            response = await fetch(url, {\n                method: HTTP_REQUEST_TYPE.GET,\n                headers: this.getFetchHeaders(options),\n            });\n        } catch (e) {\n            if (window.navigator.onLine) {\n                throw createBrowserAuthError(\n                    BrowserAuthErrorCodes.getRequestFailed\n                );\n            } else {\n                throw createBrowserAuthError(\n                    BrowserAuthErrorCodes.noNetworkConnectivity\n                );\n            }\n        }\n\n        try {\n            return {\n                headers: this.getHeaderDict(response.headers),\n                body: (await response.json()) as T,\n                status: response.status,\n            };\n        } catch (e) {\n            throw createBrowserAuthError(\n                BrowserAuthErrorCodes.failedToParseResponse\n            );\n        }\n    }\n\n    /**\n     * Fetch Client for REST endpoints - Post request\n     * @param url\n     * @param headers\n     * @param body\n     */\n    async sendPostRequestAsync<T>(\n        url: string,\n        options?: NetworkRequestOptions\n    ): Promise<NetworkResponse<T>> {\n        const reqBody = (options && options.body) || Constants.EMPTY_STRING;\n\n        let response;\n        try {\n            response = await fetch(url, {\n                method: HTTP_REQUEST_TYPE.POST,\n                headers: this.getFetchHeaders(options),\n                body: reqBody,\n            });\n        } catch (e) {\n            if (window.navigator.onLine) {\n                throw createBrowserAuthError(\n                    BrowserAuthErrorCodes.postRequestFailed\n                );\n            } else {\n                throw createBrowserAuthError(\n                    BrowserAuthErrorCodes.noNetworkConnectivity\n                );\n            }\n        }\n\n        try {\n            return {\n                headers: this.getHeaderDict(response.headers),\n                body: (await response.json()) as T,\n                status: response.status,\n            };\n        } catch (e) {\n            throw createBrowserAuthError(\n                BrowserAuthErrorCodes.failedToParseResponse\n            );\n        }\n    }\n\n    /**\n     * Get Fetch API Headers object from string map\n     * @param inputHeaders\n     */\n    private getFetchHeaders(options?: NetworkRequestOptions): Headers {\n        const headers = new Headers();\n        if (!(options && options.headers)) {\n            return headers;\n        }\n        const optionsHeaders = options.headers;\n        Object.keys(optionsHeaders).forEach((key) => {\n            headers.append(key, optionsHeaders[key]);\n        });\n        return headers;\n    }\n\n    private getHeaderDict(headers: Headers): Record<string, string> {\n        const headerDict: Record<string, string> = {};\n        headers.forEach((value: string, key: string) => {\n            headerDict[key] = value;\n        });\n        return headerDict;\n    }\n}\n"],"mappings":";;;;;;;;AAAA;;;AAGG;AAcH;;AAEG;MACUA,WAAW;EACpB;;;;;AAKG;EACH,MAAMC,mBAAmBA,CACrBC,GAAW,EACXC,OAA+B;IAE/B,IAAIC,QAAQ;IACZ,IAAI;MACAA,QAAQ,GAAG,MAAMC,KAAK,CAACH,GAAG,EAAE;QACxBI,MAAM,EAAEC,iBAAiB,CAACC,GAAG;QAC7BC,OAAO,EAAE,IAAI,CAACC,eAAe,CAACP,OAAO;MACxC,EAAC;IACL,EAAC,OAAOQ,CAAC,EAAE;MACR,IAAIC,MAAM,CAACC,SAAS,CAACC,MAAM,EAAE;QACzB,MAAMC,sBAAsB,CACxBC,gBAAsC,CACzC;MACJ,OAAM;QACH,MAAMD,sBAAsB,CACxBE,qBAA2C,CAC9C;MACJ;IACJ;IAED,IAAI;MACA,OAAO;QACHR,OAAO,EAAE,IAAI,CAACS,aAAa,CAACd,QAAQ,CAACK,OAAO,CAAC;QAC7CU,IAAI,EAAG,MAAMf,QAAQ,CAACgB,IAAI,EAAQ;QAClCC,MAAM,EAAEjB,QAAQ,CAACiB;OACpB;IACJ,EAAC,OAAOV,CAAC,EAAE;MACR,MAAMI,sBAAsB,CACxBO,qBAA2C,CAC9C;IACJ;;EAGL;;;;;AAKG;EACH,MAAMC,oBAAoBA,CACtBrB,GAAW,EACXC,OAA+B;IAE/B,MAAMqB,OAAO,GAAIrB,OAAO,IAAIA,OAAO,CAACgB,IAAI,IAAKM,SAAS,CAACC,YAAY;IAEnE,IAAItB,QAAQ;IACZ,IAAI;MACAA,QAAQ,GAAG,MAAMC,KAAK,CAACH,GAAG,EAAE;QACxBI,MAAM,EAAEC,iBAAiB,CAACoB,IAAI;QAC9BlB,OAAO,EAAE,IAAI,CAACC,eAAe,CAACP,OAAO,CAAC;QACtCgB,IAAI,EAAEK;MACT,EAAC;IACL,EAAC,OAAOb,CAAC,EAAE;MACR,IAAIC,MAAM,CAACC,SAAS,CAACC,MAAM,EAAE;QACzB,MAAMC,sBAAsB,CACxBa,iBAAuC,CAC1C;MACJ,OAAM;QACH,MAAMb,sBAAsB,CACxBE,qBAA2C,CAC9C;MACJ;IACJ;IAED,IAAI;MACA,OAAO;QACHR,OAAO,EAAE,IAAI,CAACS,aAAa,CAACd,QAAQ,CAACK,OAAO,CAAC;QAC7CU,IAAI,EAAG,MAAMf,QAAQ,CAACgB,IAAI,EAAQ;QAClCC,MAAM,EAAEjB,QAAQ,CAACiB;OACpB;IACJ,EAAC,OAAOV,CAAC,EAAE;MACR,MAAMI,sBAAsB,CACxBO,qBAA2C,CAC9C;IACJ;;EAGL;;;AAGG;EACKZ,eAAeA,CAACP,OAA+B;IACnD,MAAMM,OAAO,GAAG,IAAIoB,OAAO,EAAE;IAC7B,IAAI,EAAE1B,OAAO,IAAIA,OAAO,CAACM,OAAO,CAAC,EAAE;MAC/B,OAAOA,OAAO;IACjB;IACD,MAAMqB,cAAc,GAAG3B,OAAO,CAACM,OAAO;IACtCsB,MAAM,CAACC,IAAI,CAACF,cAAc,CAAC,CAACG,OAAO,CAAEC,GAAG,IAAI;MACxCzB,OAAO,CAAC0B,MAAM,CAACD,GAAG,EAAEJ,cAAc,CAACI,GAAG,CAAC,CAAC;IAC5C,CAAC,CAAC;IACF,OAAOzB,OAAO;;EAGVS,aAAaA,CAACT,OAAgB;IAClC,MAAM2B,UAAU,GAA2B,EAAE;IAC7C3B,OAAO,CAACwB,OAAO,CAAC,CAACI,KAAa,EAAEH,GAAW,KAAI;MAC3CE,UAAU,CAACF,GAAG,CAAC,GAAGG,KAAK;IAC3B,CAAC,CAAC;IACF,OAAOD,UAAU;;AAExB"},"metadata":{},"sourceType":"module","externalDependencies":[]}